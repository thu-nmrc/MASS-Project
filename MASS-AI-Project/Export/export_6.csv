Agent名称,发送的prompt,收到的内容,回合
A001_NJ_BK,"系统: [模拟与时间]
start_date={start_date}; period=week; Round 从 1 开始; 区域=NJ, PA; 角色=门店值班经理群体(每个agent代表若干家门店).

[目标与可控项]
目标=利润最大化(revenue - cost). 可控: 招聘/解雇; 工时与排班; 起薪(>=Floor); 价格与促销; weekday_hours_open; n_registers_open_11am; 不可扩张店面. shock 在 [0,1], 默认 0.

[填写规则(简版)]
1) 第一行: Agent={agent_id} | Round={round_hint}
2) 随后仅输出两部分, 且按顺序: 数据卡, 回填胶囊.
3) 数据卡: 逐行 key=value, 仅数字/0/1/小数, 不要单位/注释/代码块. 键名如下:
   Action; target_fte; schedule_quality; weekday_hours_open; n_registers_open_11am; company_owned;
   starting_wage; price_soda_med; price_fries_small; price_entree; price_full_meal_after_tax;
   benefit_free_meal; benefit_lowprice_meal; has_recruit_bonus; recruit_bonus_amount; hire_attempts;
   p_hire; hires_realized; separations; headcount_ft; headcount_pt; fte; calc_rel_wage; calc_r; calc_floor.
4) 回填胶囊: 使用 [RC-BEGIN] 和 [RC-END]; 按此顺序返回:
   prev_ft; prev_pt; prev_fte; prev_wage; prev_price_soda_med; prev_price_fries_small; prev_price_entree; prev_price_full_meal_after_tax;
   last_hire_attempts; last_p_hire; last_hires_realized; last_fill_rate; last_weekday_hours_open; last_n_registers_open_11am.
5) Round 1: 在数据卡中填写四个初始价格; 系统将其记为各自P0. Round>=2: 不再改P0; 价格需满足下述价格护栏.

[价格护栏与P0]
绝对区间: P 在 [P0*cap_down, P0*cap_up] 内; 默认 cap_down=0.85, cap_up=1.20. 单周变动: |P/prev_P - 1| <= per_cap(默认 0.05).
促销(可选注入): promo_active=1 时, 仅下调下界 new_cap_down=cap_down - promo_discount_extra(0..0.10). 若 company_owned=1 且 promo_required_for_company_owned=1, 需跟随促销.
越界处理: 系统将夹逼到区间边界, 并要求在 Action 标注 guardrail.

[COGS]
按含税价*系数近似: entree 0.33; fries_small 0.25; soda_med 0.12; full_meal_after_tax 0.30. 如需税前价, 注入 sales_tax_rate 并用 pretax=after_tax/(1+rate).

[招聘]
q_base=0.60. p_hire=min(1, q_base*exp(1.50*rel_wage + 0.25*(schedule_quality-2) + 0.10*benefit_free_meal + 0.06*benefit_lowprice_meal + 0.10*(recruit_bonus_amount/100) + brand_const - 1.20*shock)).
rel_wage=max(0,(starting_wage-Floor)/Floor). brand_const: BK=0, KFC=+0.05, WY=+0.02, RR=-0.03(可注入 brand_const 覆盖). hires_realized=floor(hire_attempts*p_hire).

[离职与短期缺勤]
sep_rate=clamp(sep_base - 0.005*(schedule_quality-2) - 0.03*rel_wage + 0.02*shock + leave_extra, 0, 0.30). 默认: sep_base=0.013; leave_extra=0.
separations=round((prev_ft+prev_pt)*sep_rate). 短期请假/产假不计入离职; 请通过降低 target_fte/weekday_hours_open/n_registers_open_11am 体现, 并在 Action 说明.

[生育(1992常量与用法)]
NJ week_birth_p=0.001275; PA week_birth_p=0.001181; 仅对 15-44 岁女性. 未注入 female_share 时默认 0.5.
估算本周新增产假≈round((prev_ft+prev_pt)*female_share*week_birth_p_by_state); 不减 headcount; 连续 6 周按缺勤处理.

[最低工资]
各州在 agent 本地规则内执行: NJ 在 Round>=9 时 Floor=5.05; PA 全程 Floor=4.25; 若注入更高 Floor 则用更高值.

[可选注入键]
round_hint, rep_n_stores, brand_const, Floor(if higher), shock, sep_base, leave_extra, female_share, init_price_*, sales_tax_rate, cap_down, cap_up, per_cap, promo_active, promo_discount_extra, promo_scope, promo_required_for_company_owned, extra_instructions=OUTPUT_MODE=data_only.
请严格遵循：你的回复第一行必须是：Agent=A001_NJ_BK | Round=1。然后换行输出正文，不要使用代码块，也不能在第一行之外重复抬头。
用户: Agent=A001_NJ_BK | Round=1
【本周行动】你是【新泽西 / Burger King】值班经理群体代理。
门店数=21。βbrand=+0.00。
最低工资：r>=9 则 Floor=5.05，否则 Floor=4.25；starting_wage>=Floor。
价格合规：price_* 必须满足背景“价格护栏”；越界将被系统夹逼，并在 Action= 标注“护栏”。
输出：第一行必须为 Agent=A001_NJ_BK | Round={round_hint}；随后仅输出“数据卡 + 回填胶囊”，不得添加其他文字/代码块。

【数据卡（Round 1 专用）】（逐行 key=value；仅数字/0/1/小数）
Action=baseline_P0
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=1.09
price_fries_small=1.19
price_entree=3.39
price_full_meal_after_tax=5.89
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=
（仅在 Round 1 使用此卡片；其他回合请使用下方“Round≥2”卡片。）

【数据卡（Round ≥ 2）】（逐行 key=value；仅数字/0/1/小数）
Action=
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=
price_fries_small=
price_entree=
price_full_meal_after_tax=
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=

【回填胶囊】
[RC-BEGIN]
prev_ft={headcount_ft}
prev_pt={headcount_pt}
prev_fte={fte}
prev_wage={starting_wage}
prev_price_soda_med={price_soda_med}
prev_price_fries_small={price_fries_small}
prev_price_entree={price_entree}
prev_price_full_meal_after_tax={price_full_meal_after_tax}
last_hire_attempts={hire_attempts}
last_p_hire={p_hire}
last_hires_realized={hires_realized}
last_fill_rate={(hires_realized / max(hire_attempts,1))四舍五入到两位}
last_weekday_hours_open={weekday_hours_open}
last_n_registers_open_11am={n_registers_open_11am}
[RC-END]","Agent=A001_NJ_BK | Round=1
Action=baseline_P0
target_fte=154
schedule_quality=2
weekday_hours_open=16
n_registers_open_11am=3
company_owned=0
starting_wage=5
price_soda_med=1.09
price_fries_small=1.19
price_entree=3.39
price_full_meal_after_tax=5.89
benefit_free_meal=1
benefit_lowprice_meal=1
has_recruit_bonus=0
recruit_bonus_amount=0
hire_attempts=8
p_hire=0.918
hires_realized=7
separations=0
headcount_ft=42
headcount_pt=210
fte=147
calc_rel_wage=0.176
calc_r=1
calc_floor=4.25
[RC-BEGIN]
prev_ft=42
prev_pt=210
prev_fte=147
prev_wage=5
prev_price_soda_med=1.09
prev_price_fries_small=1.19
prev_price_entree=3.39
prev_price_full_meal_after_tax=5.89
last_hire_attempts=8
last_p_hire=0.918
last_hires_realized=7
last_fill_rate=0.88
last_weekday_hours_open=16
last_n_registers_open_11am=3
[RC-END]",1
A002_NJ_BK,"系统: [模拟与时间]
start_date={start_date}; period=week; Round 从 1 开始; 区域=NJ, PA; 角色=门店值班经理群体(每个agent代表若干家门店).

[目标与可控项]
目标=利润最大化(revenue - cost). 可控: 招聘/解雇; 工时与排班; 起薪(>=Floor); 价格与促销; weekday_hours_open; n_registers_open_11am; 不可扩张店面. shock 在 [0,1], 默认 0.

[填写规则(简版)]
1) 第一行: Agent={agent_id} | Round={round_hint}
2) 随后仅输出两部分, 且按顺序: 数据卡, 回填胶囊.
3) 数据卡: 逐行 key=value, 仅数字/0/1/小数, 不要单位/注释/代码块. 键名如下:
   Action; target_fte; schedule_quality; weekday_hours_open; n_registers_open_11am; company_owned;
   starting_wage; price_soda_med; price_fries_small; price_entree; price_full_meal_after_tax;
   benefit_free_meal; benefit_lowprice_meal; has_recruit_bonus; recruit_bonus_amount; hire_attempts;
   p_hire; hires_realized; separations; headcount_ft; headcount_pt; fte; calc_rel_wage; calc_r; calc_floor.
4) 回填胶囊: 使用 [RC-BEGIN] 和 [RC-END]; 按此顺序返回:
   prev_ft; prev_pt; prev_fte; prev_wage; prev_price_soda_med; prev_price_fries_small; prev_price_entree; prev_price_full_meal_after_tax;
   last_hire_attempts; last_p_hire; last_hires_realized; last_fill_rate; last_weekday_hours_open; last_n_registers_open_11am.
5) Round 1: 在数据卡中填写四个初始价格; 系统将其记为各自P0. Round>=2: 不再改P0; 价格需满足下述价格护栏.

[价格护栏与P0]
绝对区间: P 在 [P0*cap_down, P0*cap_up] 内; 默认 cap_down=0.85, cap_up=1.20. 单周变动: |P/prev_P - 1| <= per_cap(默认 0.05).
促销(可选注入): promo_active=1 时, 仅下调下界 new_cap_down=cap_down - promo_discount_extra(0..0.10). 若 company_owned=1 且 promo_required_for_company_owned=1, 需跟随促销.
越界处理: 系统将夹逼到区间边界, 并要求在 Action 标注 guardrail.

[COGS]
按含税价*系数近似: entree 0.33; fries_small 0.25; soda_med 0.12; full_meal_after_tax 0.30. 如需税前价, 注入 sales_tax_rate 并用 pretax=after_tax/(1+rate).

[招聘]
q_base=0.60. p_hire=min(1, q_base*exp(1.50*rel_wage + 0.25*(schedule_quality-2) + 0.10*benefit_free_meal + 0.06*benefit_lowprice_meal + 0.10*(recruit_bonus_amount/100) + brand_const - 1.20*shock)).
rel_wage=max(0,(starting_wage-Floor)/Floor). brand_const: BK=0, KFC=+0.05, WY=+0.02, RR=-0.03(可注入 brand_const 覆盖). hires_realized=floor(hire_attempts*p_hire).

[离职与短期缺勤]
sep_rate=clamp(sep_base - 0.005*(schedule_quality-2) - 0.03*rel_wage + 0.02*shock + leave_extra, 0, 0.30). 默认: sep_base=0.013; leave_extra=0.
separations=round((prev_ft+prev_pt)*sep_rate). 短期请假/产假不计入离职; 请通过降低 target_fte/weekday_hours_open/n_registers_open_11am 体现, 并在 Action 说明.

[生育(1992常量与用法)]
NJ week_birth_p=0.001275; PA week_birth_p=0.001181; 仅对 15-44 岁女性. 未注入 female_share 时默认 0.5.
估算本周新增产假≈round((prev_ft+prev_pt)*female_share*week_birth_p_by_state); 不减 headcount; 连续 6 周按缺勤处理.

[最低工资]
各州在 agent 本地规则内执行: NJ 在 Round>=9 时 Floor=5.05; PA 全程 Floor=4.25; 若注入更高 Floor 则用更高值.

[可选注入键]
round_hint, rep_n_stores, brand_const, Floor(if higher), shock, sep_base, leave_extra, female_share, init_price_*, sales_tax_rate, cap_down, cap_up, per_cap, promo_active, promo_discount_extra, promo_scope, promo_required_for_company_owned, extra_instructions=OUTPUT_MODE=data_only.
请严格遵循：你的回复第一行必须是：Agent=A002_NJ_BK | Round=1。然后换行输出正文，不要使用代码块，也不能在第一行之外重复抬头。
用户: Agent=A002_NJ_BK | Round=1
【本周行动】你是【新泽西 / Burger King】值班经理群体代理。
门店数=21。βbrand=+0.00。
最低工资：r>=9 则 Floor=5.05，否则 Floor=4.25；starting_wage>=Floor。
价格合规：price_* 必须满足背景“价格护栏”；越界将被系统夹逼，并在 Action= 标注“护栏”。
输出：第一行必须为 Agent=A002_NJ_BK | Round={round_hint}；随后仅输出“数据卡 + 回填胶囊”，不得添加其他文字/代码块。

【数据卡（Round 1 专用）】（逐行 key=value；仅数字/0/1/小数）
Action=baseline_P0
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=1.14
price_fries_small=1.24
price_entree=3.44
price_full_meal_after_tax=5.94
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=
（仅在 Round 1 使用此卡片；其他回合请使用下方“Round≥2”卡片。）

【数据卡（Round ≥ 2）】（逐行 key=value；仅数字/0/1/小数）
Action=
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=
price_fries_small=
price_entree=
price_full_meal_after_tax=
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=

【回填胶囊】
[RC-BEGIN]
prev_ft={headcount_ft}
prev_pt={headcount_pt}
prev_fte={fte}
prev_wage={starting_wage}
prev_price_soda_med={price_soda_med}
prev_price_fries_small={price_fries_small}
prev_price_entree={price_entree}
prev_price_full_meal_after_tax={price_full_meal_after_tax}
last_hire_attempts={hire_attempts}
last_p_hire={p_hire}
last_hires_realized={hires_realized}
last_fill_rate={(hires_realized / max(hire_attempts,1))四舍五入到两位}
last_weekday_hours_open={weekday_hours_open}
last_n_registers_open_11am={n_registers_open_11am}
[RC-END]","Agent=A002_NJ_BK | Round=1
Action=baseline_P0
target_fte=262.5
schedule_quality=2
weekday_hours_open=15
n_registers_open_11am=3
company_owned=0
starting_wage=4.6
price_soda_med=1.14
price_fries_small=1.24
price_entree=3.44
price_full_meal_after_tax=5.94
benefit_free_meal=1
benefit_lowprice_meal=1
has_recruit_bonus=0
recruit_bonus_amount=0
hire_attempts=0
p_hire=0.797
hires_realized=0
separations=0
headcount_ft=105
headcount_pt=315
fte=262.5
calc_rel_wage=0.08235
calc_r=1
calc_floor=4.25
[RC-BEGIN]
prev_ft=105
prev_pt=315
prev_fte=262.5
prev_wage=4.6
prev_price_soda_med=1.14
prev_price_fries_small=1.24
prev_price_entree=3.44
prev_price_full_meal_after_tax=5.94
last_hire_attempts=0
last_p_hire=0.797
last_hires_realized=0
last_fill_rate=0.00
last_weekday_hours_open=15
last_n_registers_open_11am=3
[RC-END]",1
A003_NJ_BK,"系统: [模拟与时间]
start_date={start_date}; period=week; Round 从 1 开始; 区域=NJ, PA; 角色=门店值班经理群体(每个agent代表若干家门店).

[目标与可控项]
目标=利润最大化(revenue - cost). 可控: 招聘/解雇; 工时与排班; 起薪(>=Floor); 价格与促销; weekday_hours_open; n_registers_open_11am; 不可扩张店面. shock 在 [0,1], 默认 0.

[填写规则(简版)]
1) 第一行: Agent={agent_id} | Round={round_hint}
2) 随后仅输出两部分, 且按顺序: 数据卡, 回填胶囊.
3) 数据卡: 逐行 key=value, 仅数字/0/1/小数, 不要单位/注释/代码块. 键名如下:
   Action; target_fte; schedule_quality; weekday_hours_open; n_registers_open_11am; company_owned;
   starting_wage; price_soda_med; price_fries_small; price_entree; price_full_meal_after_tax;
   benefit_free_meal; benefit_lowprice_meal; has_recruit_bonus; recruit_bonus_amount; hire_attempts;
   p_hire; hires_realized; separations; headcount_ft; headcount_pt; fte; calc_rel_wage; calc_r; calc_floor.
4) 回填胶囊: 使用 [RC-BEGIN] 和 [RC-END]; 按此顺序返回:
   prev_ft; prev_pt; prev_fte; prev_wage; prev_price_soda_med; prev_price_fries_small; prev_price_entree; prev_price_full_meal_after_tax;
   last_hire_attempts; last_p_hire; last_hires_realized; last_fill_rate; last_weekday_hours_open; last_n_registers_open_11am.
5) Round 1: 在数据卡中填写四个初始价格; 系统将其记为各自P0. Round>=2: 不再改P0; 价格需满足下述价格护栏.

[价格护栏与P0]
绝对区间: P 在 [P0*cap_down, P0*cap_up] 内; 默认 cap_down=0.85, cap_up=1.20. 单周变动: |P/prev_P - 1| <= per_cap(默认 0.05).
促销(可选注入): promo_active=1 时, 仅下调下界 new_cap_down=cap_down - promo_discount_extra(0..0.10). 若 company_owned=1 且 promo_required_for_company_owned=1, 需跟随促销.
越界处理: 系统将夹逼到区间边界, 并要求在 Action 标注 guardrail.

[COGS]
按含税价*系数近似: entree 0.33; fries_small 0.25; soda_med 0.12; full_meal_after_tax 0.30. 如需税前价, 注入 sales_tax_rate 并用 pretax=after_tax/(1+rate).

[招聘]
q_base=0.60. p_hire=min(1, q_base*exp(1.50*rel_wage + 0.25*(schedule_quality-2) + 0.10*benefit_free_meal + 0.06*benefit_lowprice_meal + 0.10*(recruit_bonus_amount/100) + brand_const - 1.20*shock)).
rel_wage=max(0,(starting_wage-Floor)/Floor). brand_const: BK=0, KFC=+0.05, WY=+0.02, RR=-0.03(可注入 brand_const 覆盖). hires_realized=floor(hire_attempts*p_hire).

[离职与短期缺勤]
sep_rate=clamp(sep_base - 0.005*(schedule_quality-2) - 0.03*rel_wage + 0.02*shock + leave_extra, 0, 0.30). 默认: sep_base=0.013; leave_extra=0.
separations=round((prev_ft+prev_pt)*sep_rate). 短期请假/产假不计入离职; 请通过降低 target_fte/weekday_hours_open/n_registers_open_11am 体现, 并在 Action 说明.

[生育(1992常量与用法)]
NJ week_birth_p=0.001275; PA week_birth_p=0.001181; 仅对 15-44 岁女性. 未注入 female_share 时默认 0.5.
估算本周新增产假≈round((prev_ft+prev_pt)*female_share*week_birth_p_by_state); 不减 headcount; 连续 6 周按缺勤处理.

[最低工资]
各州在 agent 本地规则内执行: NJ 在 Round>=9 时 Floor=5.05; PA 全程 Floor=4.25; 若注入更高 Floor 则用更高值.

[可选注入键]
round_hint, rep_n_stores, brand_const, Floor(if higher), shock, sep_base, leave_extra, female_share, init_price_*, sales_tax_rate, cap_down, cap_up, per_cap, promo_active, promo_discount_extra, promo_scope, promo_required_for_company_owned, extra_instructions=OUTPUT_MODE=data_only.
请严格遵循：你的回复第一行必须是：Agent=A003_NJ_BK | Round=1。然后换行输出正文，不要使用代码块，也不能在第一行之外重复抬头。
用户: Agent=A003_NJ_BK | Round=1
【本周行动】你是【新泽西 / Burger King】值班经理群体代理。
门店数=21。βbrand=+0.00。
最低工资：r>=9 则 Floor=5.05，否则 Floor=4.25；starting_wage>=Floor。
价格合规：price_* 必须满足背景“价格护栏”；越界将被系统夹逼，并在 Action= 标注“护栏”。
输出：第一行必须为 Agent=A003_NJ_BK | Round={round_hint}；随后仅输出“数据卡 + 回填胶囊”，不得添加其他文字/代码块。

【数据卡（Round 1 专用）】（逐行 key=value；仅数字/0/1/小数）
Action=baseline_P0
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=1.19
price_fries_small=1.29
price_entree=3.49
price_full_meal_after_tax=5.99
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=
（仅在 Round 1 使用此卡片；其他回合请使用下方“Round≥2”卡片。）

【数据卡（Round ≥ 2）】（逐行 key=value；仅数字/0/1/小数）
Action=
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=
price_fries_small=
price_entree=
price_full_meal_after_tax=
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=

【回填胶囊】
[RC-BEGIN]
prev_ft={headcount_ft}
prev_pt={headcount_pt}
prev_fte={fte}
prev_wage={starting_wage}
prev_price_soda_med={price_soda_med}
prev_price_fries_small={price_fries_small}
prev_price_entree={price_entree}
prev_price_full_meal_after_tax={price_full_meal_after_tax}
last_hire_attempts={hire_attempts}
last_p_hire={p_hire}
last_hires_realized={hires_realized}
last_fill_rate={(hires_realized / max(hire_attempts,1))四舍五入到两位}
last_weekday_hours_open={weekday_hours_open}
last_n_registers_open_11am={n_registers_open_11am}
[RC-END]","Agent=A003_NJ_BK | Round=1
Action=baseline_P0
target_fte=168
schedule_quality=2
weekday_hours_open=16
n_registers_open_11am=42
company_owned=0
starting_wage=4.5
price_soda_med=1.19
price_fries_small=1.29
price_entree=3.49
price_full_meal_after_tax=5.99
benefit_free_meal=0
benefit_lowprice_meal=1
has_recruit_bonus=0
recruit_bonus_amount=0
hire_attempts=0
p_hire=0.6959
hires_realized=0
separations=0
headcount_ft=84
headcount_pt=168
fte=168
calc_rel_wage=0.0588
calc_r=0
calc_floor=4.25
[RC-BEGIN]
prev_ft=84
prev_pt=168
prev_fte=168
prev_wage=4.5
prev_price_soda_med=1.19
prev_price_fries_small=1.29
prev_price_entree=3.49
prev_price_full_meal_after_tax=5.99
last_hire_attempts=0
last_p_hire=0.6959
last_hires_realized=0
last_fill_rate=0.00
last_weekday_hours_open=16
last_n_registers_open_11am=42
[RC-END]",1
A004_NJ_BK,"系统: [模拟与时间]
start_date={start_date}; period=week; Round 从 1 开始; 区域=NJ, PA; 角色=门店值班经理群体(每个agent代表若干家门店).

[目标与可控项]
目标=利润最大化(revenue - cost). 可控: 招聘/解雇; 工时与排班; 起薪(>=Floor); 价格与促销; weekday_hours_open; n_registers_open_11am; 不可扩张店面. shock 在 [0,1], 默认 0.

[填写规则(简版)]
1) 第一行: Agent={agent_id} | Round={round_hint}
2) 随后仅输出两部分, 且按顺序: 数据卡, 回填胶囊.
3) 数据卡: 逐行 key=value, 仅数字/0/1/小数, 不要单位/注释/代码块. 键名如下:
   Action; target_fte; schedule_quality; weekday_hours_open; n_registers_open_11am; company_owned;
   starting_wage; price_soda_med; price_fries_small; price_entree; price_full_meal_after_tax;
   benefit_free_meal; benefit_lowprice_meal; has_recruit_bonus; recruit_bonus_amount; hire_attempts;
   p_hire; hires_realized; separations; headcount_ft; headcount_pt; fte; calc_rel_wage; calc_r; calc_floor.
4) 回填胶囊: 使用 [RC-BEGIN] 和 [RC-END]; 按此顺序返回:
   prev_ft; prev_pt; prev_fte; prev_wage; prev_price_soda_med; prev_price_fries_small; prev_price_entree; prev_price_full_meal_after_tax;
   last_hire_attempts; last_p_hire; last_hires_realized; last_fill_rate; last_weekday_hours_open; last_n_registers_open_11am.
5) Round 1: 在数据卡中填写四个初始价格; 系统将其记为各自P0. Round>=2: 不再改P0; 价格需满足下述价格护栏.

[价格护栏与P0]
绝对区间: P 在 [P0*cap_down, P0*cap_up] 内; 默认 cap_down=0.85, cap_up=1.20. 单周变动: |P/prev_P - 1| <= per_cap(默认 0.05).
促销(可选注入): promo_active=1 时, 仅下调下界 new_cap_down=cap_down - promo_discount_extra(0..0.10). 若 company_owned=1 且 promo_required_for_company_owned=1, 需跟随促销.
越界处理: 系统将夹逼到区间边界, 并要求在 Action 标注 guardrail.

[COGS]
按含税价*系数近似: entree 0.33; fries_small 0.25; soda_med 0.12; full_meal_after_tax 0.30. 如需税前价, 注入 sales_tax_rate 并用 pretax=after_tax/(1+rate).

[招聘]
q_base=0.60. p_hire=min(1, q_base*exp(1.50*rel_wage + 0.25*(schedule_quality-2) + 0.10*benefit_free_meal + 0.06*benefit_lowprice_meal + 0.10*(recruit_bonus_amount/100) + brand_const - 1.20*shock)).
rel_wage=max(0,(starting_wage-Floor)/Floor). brand_const: BK=0, KFC=+0.05, WY=+0.02, RR=-0.03(可注入 brand_const 覆盖). hires_realized=floor(hire_attempts*p_hire).

[离职与短期缺勤]
sep_rate=clamp(sep_base - 0.005*(schedule_quality-2) - 0.03*rel_wage + 0.02*shock + leave_extra, 0, 0.30). 默认: sep_base=0.013; leave_extra=0.
separations=round((prev_ft+prev_pt)*sep_rate). 短期请假/产假不计入离职; 请通过降低 target_fte/weekday_hours_open/n_registers_open_11am 体现, 并在 Action 说明.

[生育(1992常量与用法)]
NJ week_birth_p=0.001275; PA week_birth_p=0.001181; 仅对 15-44 岁女性. 未注入 female_share 时默认 0.5.
估算本周新增产假≈round((prev_ft+prev_pt)*female_share*week_birth_p_by_state); 不减 headcount; 连续 6 周按缺勤处理.

[最低工资]
各州在 agent 本地规则内执行: NJ 在 Round>=9 时 Floor=5.05; PA 全程 Floor=4.25; 若注入更高 Floor 则用更高值.

[可选注入键]
round_hint, rep_n_stores, brand_const, Floor(if higher), shock, sep_base, leave_extra, female_share, init_price_*, sales_tax_rate, cap_down, cap_up, per_cap, promo_active, promo_discount_extra, promo_scope, promo_required_for_company_owned, extra_instructions=OUTPUT_MODE=data_only.
请严格遵循：你的回复第一行必须是：Agent=A004_NJ_BK | Round=1。然后换行输出正文，不要使用代码块，也不能在第一行之外重复抬头。
用户: Agent=A004_NJ_BK | Round=1
【本周行动】你是【新泽西 / Burger King】值班经理群体代理。
门店数=21。βbrand=+0.00。
最低工资：r>=9 则 Floor=5.05，否则 Floor=4.25；starting_wage>=Floor。
价格合规：price_* 必须满足背景“价格护栏”；越界将被系统夹逼，并在 Action= 标注“护栏”。
输出：第一行必须为 Agent=A004_NJ_BK | Round={round_hint}；随后仅输出“数据卡 + 回填胶囊”，不得添加其他文字/代码块。

【数据卡（Round 1 专用）】（逐行 key=value；仅数字/0/1/小数）
Action=baseline_P0
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=1.04
price_fries_small=1.14
price_entree=3.34
price_full_meal_after_tax=5.84
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=
（仅在 Round 1 使用此卡片；其他回合请使用下方“Round≥2”卡片。）

【数据卡（Round ≥ 2）】（逐行 key=value；仅数字/0/1/小数）
Action=
target_fte=
schedule_quality={1|2|3}
weekday_hours_open=
n_registers_open_11am=
company_owned={0|1}
starting_wage=
price_soda_med=
price_fries_small=
price_entree=
price_full_meal_after_tax=
benefit_free_meal={0|1}
benefit_lowprice_meal={0|1}
has_recruit_bonus={0|1}
recruit_bonus_amount=
hire_attempts=
p_hire=
hires_realized=
separations=
headcount_ft=
headcount_pt=
fte=
calc_rel_wage=
calc_r=
calc_floor=

【回填胶囊】
[RC-BEGIN]
prev_ft={headcount_ft}
prev_pt={headcount_pt}
prev_fte={fte}
prev_wage={starting_wage}
prev_price_soda_med={price_soda_med}
prev_price_fries_small={price_fries_small}
prev_price_entree={price_entree}
prev_price_full_meal_after_tax={price_full_meal_after_tax}
last_hire_attempts={hire_attempts}
last_p_hire={p_hire}
last_hires_realized={hires_realized}
last_fill_rate={(hires_realized / max(hire_attempts,1))四舍五入到两位}
last_weekday_hours_open={weekday_hours_open}
last_n_registers_open_11am={n_registers_open_11am}
[RC-END]","Agent=A004_NJ_BK | Round=1
Action=baseline_P0
target_fte=258
schedule_quality=2
weekday_hours_open=15
n_registers_open_11am=3
company_owned=0
starting_wage=4.5
price_soda_med=1.04
price_fries_small=1.14
price_entree=3.34
price_full_meal_after_tax=5.84
benefit_free_meal=0
benefit_lowprice_meal=1
has_recruit_bonus=0
recruit_bonus_amount=0
hire_attempts=18
p_hire=0.696
hires_realized=12
separations=4
headcount_ft=126
headcount_pt=252
fte=252
calc_rel_wage=0.0588
calc_r=1
calc_floor=4.25
[RC-BEGIN]
prev_ft=126
prev_pt=252
prev_fte=252
prev_wage=4.5
prev_price_soda_med=1.04
prev_price_fries_small=1.14
prev_price_entree=3.34
prev_price_full_meal_after_tax=5.84
last_hire_attempts=18
last_p_hire=0.696
last_hires_realized=12
last_fill_rate=0.67
last_weekday_hours_open=15
last_n_registers_open_11am=3
[RC-END]",1
